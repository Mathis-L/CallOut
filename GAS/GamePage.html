<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <title>Call Out! - The Game</title>
    <!-- Inclusion des dépendances externes -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Inclusion du fichier CSS -->
    <?!= include('GamePage.css'); ?>

</head>
<body>
  <div class="container">
    

    <div id="player-list-area" class="card">
      <button id="leaveGameBtn">Bail Out!</button>
      <h3>Party Peeps:</h3>
      <ul id="player-list">
        <li class="loading status-message">Summoning players...</li>
      </ul>
    </div>

    <div class="card game-card"> 
      <div id="game-content">
        <!-- Phases de jeu -->
        <section id="voting-phase" class="game-phase">
          <h2>WHO'S IT GONNA BE?!</h2>
          <p id="current-question">The big question is...</p>
          <div id="player-vote-options">
            <!-- Player buttons generated by JS -->
          </div>
          <p id="vote-status" class="status-message">Point your finger... wisely!</p>
        </section>

        <section id="results-phase" class="game-phase">
          <h2>THE VERDICT!</h2>
          <div id="results-display">
             <!-- Result items generated by JS -->
          </div>
          <button id="next-round-btn">Ready For More?</button>
          <p id="ready-status" class="status-message">Waiting for the eager beavers...</p>
        </section>

        <section id="waiting-area" class="game-phase active">
          <h2>GET READY!</h2>
          <p id="waiting-message" class="status-message">The game is brewing...</p>
          <div class="loader"></div>
        </section>

        <p id="pause-message" class="status-message">Hold your horses! Game paused...</p>
      </div>
    </div>
  </div>

  <!-- Popup pour l'animation du lancer de pièce -->
  <div id="coin-toss-popup" class="popup-overlay">
      <div class="popup-content">
          <div id="popup-tosser-name">
              <!-- Avatar and name populated by JS -->
              Someone's flipping out...
          </div>
          <div class="coin-animation-spot-popup">
              <div class="coin" id="popup-coin">
                  <div class="head"></div> <!-- Face -->
                  <div class="tail"></div> <!-- Pile -->
              </div>
          </div>
          <p class="popup-status">Coin in the air!</p>
      </div>
  </div>

    <!-- Script pour passer les variables du serveur au client -->
    <script>
        const firebaseConfig = <?!= firebaseConfig ?>;
        const gameId = "<?!= gameId ?>";
        const currentUserId = "<?!= userId ?>";
        const currentUserPseudo = "<?!= pseudo ?>";
    </script>

    <!-- Inclusion des fichiers JavaScript principal -->
    <?!= include('Questions'); ?>
    <?!= include('GamePage.js'); ?>

</body>
</html>